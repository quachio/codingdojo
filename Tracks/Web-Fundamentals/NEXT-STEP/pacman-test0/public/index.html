<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>PacMan-Test</title>
		<style media="screen">
			body {
				background-color: black;
				margin: 0;
				padding: 0;
			}

			ul {
				list-style-type: none;
				margin: 0;
				padding: 0;
			}

			li {
				display: table-cell;
				/*height: 20px;
				width: 20px;*/
				height: 45px;
				width: 45px;
				background-color: red;
			}

			.brick {
				background-color: blue;
			}

			.coin {
				background: url("image/coin.gif");
				background-repeat: no-repeat;
				background-position: center;
				width: 45px;
				height: 45px;
			}

			.pacman {
				background: url("image/pacman.gif");
				background-repeat: no-repeat;
				background-position: center;
				background-size: cover;
				/*width: 20px;
				height: 20px;*/
				width: 45px;
				height: 45px;
				-ms-transform: rotate(0deg);
				/* IE 9 */
				-webkit-transform: rotate(0deg);
				/* Chrome, Safari, Opera */
				transform: rotate(0deg);
			}

			.empty {
				background-color: black;
				/*width: 20px;
				height: 20px;*/
				width: 45px;
				height: 45px;
			}

			.down {
				-ms-transform: rotate(90deg);
				/* IE 9 */
				-webkit-transform: rotate(90deg);
				/* Chrome, Safari, Opera */
				transform: rotate(90deg);
			}

			.left {
				-ms-transform: rotate(180deg);
				/* IE 9 */
				-webkit-transform: rotate(180deg);
				/* Chrome, Safari, Opera */
				transform: rotate(180deg);
			}

			.up {
				-ms-transform: rotate(360deg);
				/* IE 9 */
				-webkit-transform: rotate(360deg);
				/* Chrome, Safari, Opera */
				transform: rotate(360deg);
			}

			.right {
				-ms-transform: rotate(0deg);
				/* IE 9 */
				-webkit-transform: rotate(0deg);
				/* Chrome, Safari, Opera */
				transform: rotate(0deg);
			}

			.num0,
			.num1,
			.topleft-corner-brick,
			.vertical-bar-5,
			.bottomleft-corner-brick,
			.bottombar21,
			.smalltop,
			.smalltopleft,
			.smalltopright,
			.smallbottomright,
			.smallbottomleft,
			.smallbottom,
			.smallleft,
			.smallright,
			.bottomright-corner-brick,
			.smallright {
				background: url('image/pacman-sprite.png');
				background-repeat: no-repeat;
			}

			.bottombar21 {
				background-position: -1345px -193px;
				width: 45px;
				height: 45px;
			}

			.num0 {
				background-position: -817px -193px;
				width: 45px;
				height: 45px;
			}

			.num0 {
				background-position: -817px -193px;
				width: 45px;
				height: 45px;
			}

			.num1 {
				background-position: -1249px -193px;
				width: 45px;
				height: 45px;
			}

			.topleft-corner-brick {
				background-position: -817px -193px;
				width: 45px;
				height: 45px;
			}

			.bottomleft-corner-brick {
				background-position: -1009px -193px;
				width: 45px;
				height: 45px;
			}

			.bottomright-corner-brick {
				background-position: -1010px -193px;
				width: 45px;
				height: 45px;
				-ms-transform: rotate(90deg);
				/* IE 9 */
				-webkit-transform: rotate(90deg);
				/* Chrome, Safari, Opera */
				transform: rotate(-90deg);
			}

			.vertical-bar-5 {
				background-position: -913px -193px;
				width: 45px;
				height: 45px;
			}

			.smalltopleft {
				background-position: -913px -147px;
				width: 45px;
				height: 45px;
			}

			.smallright {
				background-position: -913px -193px;
				width: 45px;
				height: 45px;
				-ms-transform: rotate(0deg);
				/* IE 9 */
				-webkit-transform: rotate(0deg);
				/* Chrome, Safari, Opera */
				transform: rotate(0deg);
			}

			.smalltopright {
				background-position: -865px -147px;
				width: 45px;
				height: 45px;
			}

			.smallbottomleft {
				background-position: -817px -147px;
				width: 45px;
				height: 45px;
			}

			.smallbottomright {
				background-position: -769px -147px;
				width: 45px;
				height: 45px;
			}

			.smalltop {
				background-position: -1px -387px;
				width: 45px;
				height: 45px;
			}

			.smallbottom {
				background-position: -1px -435px;
				width: 45px;
				height: 45px;
			}

			.smallleft {
				/*background-position: -144px -435px;*/
				background-position: -1161px -145px;
				width: 45px;
				height: 45px;
			}

			.smallright {
				/*background-position: -89px -435px;*/
				background-position: -1197px -145px;
				width: 45px;
				height: 45px;
			}

		</style>
		<script src="https://code.jquery.com/jquery-3.1.0.slim.min.js" integrity="sha256-cRpWjoSOw5KcyIOaZNo4i6fZ9tKPhYYb6i5T9RSVJG8=" crossorigin="anonymous"></script>
		<script type="text/javascript">
			

			var model = {
				world: [
					[3, 2, 2, 3],
					[2, 1, 1, 2],
					[2, 1, 1, 2],
					[3, 2, 2, 3],
				],

				display: function() {
					for (var i = 0; i < this.world.length; i++) {
						for (var j = i; j < this.world[i]; j++) {
							console.log(this.world[i][j]);
						}
					}
				},
				updateMove: function(direction) {
					console.log("updateMove");



					// Update previous move
					this.move.prev.x = this.pacman.x;
					this.move.prev.y = this.pacman.y;
					// console.log(this.move.prev.x, this.move.prev.y);

					// Update previous move
					this.move.next.x = model.pacman.x + direction.x;
					this.move.next.y = model.pacman.y + direction.y;

					if (direction.value === 'right') {
						console.log("[right] pacman prev :", "[row-" + model.move.prev.x + "]", "[col-" + model.move.prev.y + "]", "rotation:" + model.pacman.rotation);
						console.log("[right] pacman next :", "[row-" + model.move.next.x + "]", "[col-" + model.move.next.y + "]", "rotation:" + model.pacman.rotation);
					} else if (direction.value === 'left') {
						console.log("[left] pacman prev :", "[row-" + model.move.prev.x + "]", "[col-" + model.move.prev.y + "]", "rotation:" + model.pacman.rotation);
						console.log("[left] pacman next :", "[row-" + model.move.next.x + "]", "[col-" + model.move.next.y + "]", "rotation:" + model.pacman.rotation);
					} else if (direction.value === 'up') {
						console.log("[left] pacman prev :", "[row-" + model.move.prev.x + "]", "[col-" + model.move.prev.y + "]", "rotation:" + model.pacman.rotation);
						console.log("[left] pacman next :", "[row-" + model.move.next.x + "]", "[col-" + model.move.next.y + "]", "rotation:" + model.pacman.rotation);
					}
				},
				brick: 2,
				coin: 1,
				empty: 0,

				pacman: {
					name: "pacman",
					x: 1,
					y: 1,
					last_x: 1,
					last_y: 1,
					rotation: 0,
					right: 0,
					left: 180,
					down: 90,
					up: 360,
					direction: {
						x: 1,
						y: 1,
					}
				},

				left: {
					value: "left",
					x: 0,
					y: -1,
				},

				right: {
					value: "right",
					x: 0,
					y: 1,
				},

				up: {
					value: "up",
					x: -1,
					y: 0,
				},

				down: {
					value: "down",
					x: 1,
					y: 0,
				},
				move: {
					prev: {
						x: 0,
						y: 0,
					},
					next: {
						x: 0,
						y: 0,
					},
				}
			}

			function displayWorldMap() {
				for (var i = 0; i < model.world.length; i++) {
					$('div.world').append('<ul id="row' + i + '"></ul>');
					for (var j = 0; j < model.world[i].length; j++) {
						if (model.world[i][j] === 1) {
							$('#row' + i).append('<li id="col' + j + '" class="coin"></li>');
						} else if (model.world[i][j] === 2) {
							$('#row' + i).append('<li id="col' + j + '" class="vertical-bar-5"></li>');
						}
					}
				}



				// function displayWorldMap() {
				// 	for (var i = 0; i < model.world.length; i++) {
				// 		$('div.world').append('<ul id="row' + i + '"></ul>');
				// 		for (var j = 0; j < model.world[i].length; j++) {
				// 			if (model.world[i][j] === 2) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="num1"></li>');
				// 			} else if (model.world[i][j] === 1) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="coin"></li>');
				//
				// 			} else if (model.world[i][j] === 0) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="empty"></li>');
				// 				// $("ul#row" + i + ">li#col" + j).removeClass('empty')
				//
				// 			} else if (model.world[i][j] === 4) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="pacman"></li>');
				// 				model.world[i][j] = 0;
				// 			} else if (model.world[i][j] === 3.1) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="topleft-corner-brick"></li>');
				//
				// 			}	else if (model.world[i][j] === 5) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="vertical-bar-5"></li>');
				//
				// 			} else if (model.world[i][j] === 3.2) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="bottomleft-corner-brick"></li>');
				//
				//
				// 			}else if (model.world[i][j] === 2.1) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="bottombar21"></li>');
				//
				// 			} else if (model.world[i][j] === 6.1) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="smalltopleft"></li>');
				//
				// 			} else if (model.world[i][j] === 6.2) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="smallbottomleft"></li>');
				//
				// 			} else if (model.world[i][j] === 6.3) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="smalltopright"></li>');
				//
				// 			} else if (model.world[i][j] === 6.4) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="smallbottomright"></li>');
				//
				// 			} else if (model.world[i][j] === 6.5) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="smalltop"></li>');
				//
				// 			} else if (model.world[i][j] === 6.6) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="smallbottom"></li>');
				//
				// 			} else if (model.world[i][j] === 6.7) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="smallleft"></li>');
				//
				// 			} else if (model.world[i][j] === 6.8) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="smallright"></li>');
				// 			}else if (model.world[i][j] === 3.4) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="bottomright-corner-brick"></li>');
				// 			}else if (model.world[i][j] === 5.1) {
				// 				$('#row' + i).append('<li id="col' + j + '" class="smallright"></li>');
				// 			}
				// 		}
				// 	}
				// }
			}

			$(document).ready(function() {
				console.log("jQuery working");
				displayWorldMap();

				$(this).keydown(function(event) {
					var key = event.which;
					switch (key) {
						case 37:
							console.log("left", model.pacman.rotation);
							if (model.pacman.rotation === 0) {
								model.pacman.rotation = 180;
								model.updateMove(model.left);

								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.left.x;
									model.pacman.y += model.left.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman').removeClass('empty').removeAttr('style');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}








								model.pacman.rotation = 180;
								$('.pacman').css('-ms-transform', 'rotate(180deg)');
								$('.pacman').css('-webkit-transform', 'rotate(180deg)');
								$('.pacman').css('transform', 'rotate(180deg)');
								console.log(model.pacman.rotation);
							} else if (model.pacman.rotation == 90) {
								model.updateMove(model.left);

								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.left.x;
									model.pacman.y += model.left.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}
								model.pacman.rotation = 180;
								$('.pacman').css('-ms-transform', 'rotate(180deg)');
								$('.pacman').css('-webkit-transform', 'rotate(180deg)');
								$('.pacman').css('transform', 'rotate(180deg)');
								console.log(model.pacman.rotation);
							} else if (model.pacman.rotation == -90) {
								model.updateMove(model.left);

								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.left.x;
									model.pacman.y += model.left.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}

								model.pacman.rotation = 180;
								$('.pacman').css('-ms-transform', 'rotate(180deg)');
								$('.pacman').css('-webkit-transform', 'rotate(180deg)');
								$('.pacman').css('transform', 'rotate(180deg)');
							} else if (model.pacman.rotation == 180) {
								console.log("old poistion: " + model.pacman.x, model.pacman.y);

								model.pacman.rotation = 180;
								model.updateMove(model.left);

								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.left.x;
									model.pacman.y += model.left.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman').removeClass('empty').removeAttr('style');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}

								model.pacman.rotation = 180;
								$('.pacman').css('-ms-transform', 'rotate(180deg)');
								$('.pacman').css('-webkit-transform', 'rotate(180deg)');
								$('.pacman').css('transform', 'rotate(180deg)');
								console.log(model.pacman.rotation);

							}
							break;
						case 38:
							// Key up.
							console.log("up");
							if (model.pacman.rotation === 0) {
								model.pacman.rotation = -90;
								model.updateMove(model.up);

								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.up.x;
									model.pacman.y += model.up.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman').removeClass('empty').removeAttr('style');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}







								$('.pacman').css('-ms-transform', 'rotate(-90deg)');
								$('.pacman').css('-webkit-transform', 'rotate(-90deg)');
								$('.pacman').css('transform', 'rotate(-90deg)');
								console.log(model.pacman.rotation);
							} else if (model.pacman.rotation == 180) {
								model.updateMove(model.up);

								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.up.x;
									model.pacman.y += model.up.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}
								model.pacman.rotation = -90;
								$('.pacman').css('-ms-transform', 'rotate(-90deg)');
								$('.pacman').css('-webkit-transform', 'rotate(-90deg)');
								$('.pacman').css('transform', 'rotate(-90deg)');

								console.log(model.pacman.rotation);
							} else if (model.pacman.rotation == 90) {
								console.log("kaka up");
								model.pacman.rotation = -90;

								model.updateMove(model.up);

								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.up.x;
									model.pacman.y += model.up.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman').removeClass('empty').removeAttr('style');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);




								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}




								$('.pacman').css('-ms-transform', 'rotate(-90deg)');
								$('.pacman').css('-webkit-transform', 'rotate(-90deg)');
								$('.pacman').css('transform', 'rotate(-90deg)');
								console.log(model.pacman.rotation);
							} else if (model.pacman.rotation === -90) {
								model.pacman.rotation = -90;
								model.updateMove(model.up);

								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.up.x;
									model.pacman.y += model.up.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman').removeClass('empty').removeAttr('style');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}

								$('.pacman').css('-ms-transform', 'rotate(-90deg)');
								$('.pacman').css('-webkit-transform', 'rotate(-90deg)');
								$('.pacman').css('transform', 'rotate(-90deg)');
							}


							break;
						case 39:

							// console.log('pacman right', model.pacman.x, model.pacman.y, model.world[model.pacman.x].length);
							// for(var i = model.pacman.x; i < model.world[model.pacman.x].length; i++) {
							// 	console.log(i);
							// }
							if (model.pacman.rotation == 0) {
								model.updateMove(model.right);

								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.right.x;
									model.pacman.y += model.right.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}



								$('.pacman').css('-ms-transform', 'rotate(0deg)');
								$('.pacman').css('-webkit-transform', 'rotate(0deg)');
								$('.pacman').css('transform', 'rotate(0deg)');



							}
							if (model.pacman.rotation === -90) {
								model.updateMove(model.right);

								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.right.x;
									model.pacman.y += model.right.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}
								model.pacman.rotation = 0;
								$('.pacman').css('-ms-transform', 'rotate(0deg)');
								$('.pacman').css('-webkit-transform', 'rotate(0deg)');
								$('.pacman').css('transform', 'rotate(0deg)');

							} else if (model.pacman.rotation == 180) {
								model.pacman.rotation = 0;



								if (model.world[model.pacman.x + model.right.x][model.pacman.y + model.right.y] !== 2) {
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('pacman');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('empty');

									model.pacman.x += model.right.x;
									model.pacman.y += model.right.y;

									console.log("new poistion: " + model.pacman.x, model.pacman.y);

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman');

									model.world[model.pacman.x][model.pacman.y] = 0;
								}

								$('.pacman').css('-ms-transform', 'rotate(0deg)');
								$('.pacman').css('-webkit-transform', 'rotate(0deg)');
								$('.pacman').css('transform', 'rotate(0deg)');
								console.log(model.pacman.rotation);
							} else if (model.pacman.rotation == 90) {

								model.updateMove(model.right);

								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.right.x;
									model.pacman.y += model.right.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}

								model.pacman.rotation = 0;
								$('.pacman').css('-ms-transform', 'rotate(0deg)');
								$('.pacman').css('-webkit-transform', 'rotate(0deg)');
								$('.pacman').css('transform', 'rotate(0deg)');
								console.log(model.pacman.rotation);
							}


							break;
						case 40:
							// Key down.
							console.log("down");

							console.log(model.pacman.rotation);









							if (model.pacman.rotation === -90) {
								model.updateMove(model.down);
								model.pacman.rotation = 90;


								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.down.x;
									model.pacman.y += model.down.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}
								model.pacman.rotation = 90;
								$('.pacman').css('-ms-transform', 'rotate(90deg)');
								$('.pacman').css('-webkit-transform', 'rotate(90deg)');
								$('.pacman').css('transform', 'rotate(90deg)');
								console.log(model.pacman.rotation);
							} else if (model.pacman.rotation == 0) {

								model.updateMove(model.down);
								model.pacman.rotation = 90;


								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.down.x;
									model.pacman.y += model.down.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}


								model.pacman.rotation = 90;
								$('.pacman').css('-ms-transform', 'rotate(90deg)');
								$('.pacman').css('-webkit-transform', 'rotate(90deg)');
								$('.pacman').css('transform', 'rotate(90deg)');





							} else if (model.pacman.rotation == 180) {
								model.updateMove(model.down);

								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.down.x;
									model.pacman.y += model.down.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}
								model.pacman.rotation = 90;
								$('.pacman').css('-ms-transform', 'rotate(90deg)');
								$('.pacman').css('-webkit-transform', 'rotate(90deg)');
								$('.pacman').css('transform', 'rotate(90deg)');
								console.log(model.pacman.rotation);
							} else if (model.pacman.rotation == 90) {
								model.updateMove(model.down);
								// model.pacman.rotation = 90;


								if (model.world[model.move.next.x][model.move.next.y] === model.coin || model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('coin', 'pacman old location', model.pacman.x, model.pacman.y);
									$("ul#row" + model.move.prev.x + ">li#col" + model.move.prev.y).removeClass('pacman').addClass('empty').removeAttr('style');
									model.pacman.x += model.down.x;
									model.pacman.y += model.down.y;

									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).removeClass('coin');
									$("ul#row" + model.pacman.x + ">li#col" + model.pacman.y).addClass('pacman');

									console.log('coin old value: ', model.world[model.move.next.x][model.move.next.y]);
									model.world[model.move.next.x][model.move.next.y] = 0;

									console.log('coin new value: ', model.world[model.move.next.x][model.move.next.y]);



								} else if (model.world[model.move.next.x][model.move.next.y] === model.brick) {
									console.log('brick');

								} else if (model.world[model.move.next.x][model.move.next.y] === model.empty) {
									console.log('empty');
								}


								// model.pacman.rotation = 90;
								$('.pacman').css('-ms-transform', 'rotate(90deg)');
								$('.pacman').css('-webkit-transform', 'rotate(90deg)');
								$('.pacman').css('transform', 'rotate(90deg)');
							}







							break;
					}
				});

			});

		</script>
	</head>

	<body>
		<div class="world"></div>
	</body>

</html>
